plugins {
  id 'java-library'
  id 'scala'
  id 'org.podval.tools.scalajs'
  id 'maven-publish'
  id 'signing'
}

description = 'Jewish Texts, Readings and Learning Schedules'

apply from: '../configure.gradle'

//jib {
//  to { image = 'gcr.io/calendar/calendar' }
//  container { mainClass = 'org.opentorah.calendar.service.CalendarService' }
//}

tasks.register('serveCalendar', JavaExec) {
  group = 'publishing'
  mainClass.set('org.opentorah.calendar.service.CalendarService')
  args = []
  classpath = sourceSets.main.runtimeClasspath
}

dependencies {
  implementation project(':opentorah-core')
  implementation project(':opentorah-util')

  testImplementation libs.caffeine
  implementation libs.zio.http
  implementation libs.logback
  implementation libs.logstash
}

//test {
//  maxParallelForks = 1
//}

